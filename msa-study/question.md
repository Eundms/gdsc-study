# 4장
- **사가의 코레오그래피와 오케스트레이션 차이?**
    - **오케스트레이션**은 전체를 통찰하는 한 곳에 보상 트랜잭션이 있다.
    - **코레오그래피**는 각 서비스에 보상 트랜잭션이 존재한다.
- **분산트랜잭션과 로컬트랜잭션**
    
    분산트랜잭션 - 하나의 서비스가 하나의 데이터베이스 바라봐야 한다.
    
    - MSA에서 왜 하나의 서비스 하나의 데이터베이스 사용 ?
        - 빠른 개발과 빠른 배포를 목적으로 하는 MSA에서 만약 데이터베이스를 공유하면,
        다른 도메인 서비스 로직 변경되어야 함
# 2장
- Hexagonal Architecture가 무엇인가요?
    
    * 의존의 관계가 도메인으로 집중된다는 것이 중요한 점
    
- 마이크로서비스에서는 하나의 서비스가 오직 하나의 데이터베이스를 가지는 것인가요? 여러개의 db를 가질 수는 없나요?
    
    * 마이크로서비스의 하나의 서비스에서 2개 DB가진다면, 도메인을 잘못나눈것이라 생각됨. 
    
    * 하나의 DB 내에 조회용을 로컬로 가지는 방식으로 CQRS에서 사용
    
- 서비스 연계 시 MOM을 사용할 수 있다고 하는데, MOM은 어떤 방식으로 연결이 이뤄지는가?
    - Messaging Oriented Middleware
    - MQ (Message Queue), Kafka 등
    
    ⇒ MOM : 결합 느슨하게 A작업 실행했어 → (A작업 실행했데) 우리도 B,C 작업 실행
    
- Stateless가 나오는데, State가 있다는 것이 정확히 무슨 의미인가요?
    
    * ex) computer 사는 예시 : A컴퓨터 / A컴퓨터, 옵션 x / A컴퓨터, 옵션x, 신용카드 결제
    
    * State 있는 경우 ⇒ Sticky Session : 중간에 테이블을 두어서, 초기 연결한 서버를 기억하도록 함.
    
    * Stateless하게 애플리케이션 구축 방식 ⇒ **JWT 유효성 검사 방식**
    
    
-  이벤트 소싱 | 금융입출금 내역 ~ 스트림 여러 개 구독 & 비정상 거래 탐지 패턴 이부분 다시 설명부탁드려요,,
    * Kafka Stream에서는 상태를 기억하고 있음. 미국내A지역 결제 후,. 3시간 이내 다른 곳에서 결제하면 이상거래

# 1장
    
- 서킷브레이커 in MSA?
    - 서킷브레이커도 MSA에서 도입해야 하는 패턴 중 하나
    - A→B 호출시 B가 장애가 있어서 A 서비스가 제대로 작동하지 않을 때, A 서비스는 정상이라고 인지할 수 있도록 A→B로 가는 과정을 대체한다.
    - 호출 횟수로 차단 → A의 서킷 브레이커가 B에게 하트비트를 보낸다. 일정 비율이상 200ok가 나오면 다시 A에서 B로 가는 회로를 연결시킨다.
    - Fast Fail → 실패할 꺼면 빨리 실패해 왜? 스레드를 잡고 있으면 자원이 고갈되기 때문에
- MSA 적용시 사용하는 빈도가 많아져 Latency 및 Overhead가 커질 것 같다.
    
    서비스끼리 통신을 계속하면서, 서비스들의 자동확장을 위해.. 쪼개놓은 것이므로… 
    
    
- ESB?
    - SOA - ESB(EnterpriseServiceBus)
    - MSA
    
    ⇒ 가장 큰 차이 : DB를 서비스별로 쓰는가 아니면 하나로 쓰는가 / SOA에서는 모든 서비스가 하나의 DB를 사용한다. 
    
- 변경 불가능한 인프라의 의미
    
    * 변경 불가능하다가 중요한 이유 == KST, UTC  리눅스에 직접 접근해서 시간을 고쳐버림
